{% extends 'default/app-main.html.twig' %}

{%  block styles %}
{{ parent() }}
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
{% endblock %}

{% block menu %}
  <li>
      <a href="{{ path('servicos') }}">In√≠cio</a>
  </li>
  <li>
      <a href="{{ path('servicos') }}">Etc</a>
  </li>
  <li>
      <a href="{{ path('sucessos') }}">Conta</a>
  </li>
  <li>
      <a href="{{ path('login') }}">Sair</a>
  </li>
{% endblock %}

{% block body %}
<div class="content-section-b">
    {% block bodyapp %}
    {{ parent() }}
    {% endblock %}
    <div class="container">

      <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header"><font style="background-color:#000; color:#fff;">Status dos Caixas</font>
            </h1>
        </div>

        <!-- listagem dos caixas cadastrados e ativos -->
        <div class="col-md-3">
          <div class="panel panel-default">
              <div class="panel-heading">
                  <img src="img/i.png">
                  <h3> Empresas </h3>
              </div>
              <div class="panel-body">
                  {% if empresas != null %}
                    {% for empresa in empresas %}
                    <button
                      {% if empresa.idstatus == 1 %}
                      class="btn btn-danger"
                      {% else %}
                      class="btn btn-success"
                      {% endif %}
                      onclick="carregaEmpresa({{empresa.id}})"
                      style="margin-bottom: 10px;">
                      {{empresa.trazaosocial}}
                    </button>
                    {% endfor %}
                  {% endif %}
              </div>
              <div class="panel-body">
                <button class="btn btn-default" onclick="carregaEmpresa(0)">Nova Empresa</button>
              </div>
          </div>
        </div>

        <!-- controle de caixa selecionado ao lado -->
        <div class="col-md-9">
          <div class="panel panel-default">
              <div class="panel-heading">
                  <h3> Controle de Empresa </h3>
              </div>
              <div class="panel-body" id="controle-empresa">
                {% if empresas == null%}
                Ao lado, clique em Nova Empresa para adicionar os dados de sua empresa
                {% else %}
                Ao lado, clique na Emprea que deseja visualizar/alterar os dados
                {% endif %}
              </div>
          </div>
        </div>
    </div>
</div>
    <!-- /.content-section-b -->
{% endblock %}

{% block contato %}
{% endblock %}

{% block javascript %}
<script type="text/javascript">
  function carregaEmpresa(id){
    $.ajax({
			type : "POST",
			url : '{{path('api_controle_empresa')}}',
			data: {id:id},
			success : function(data) {
				$("#controle-empresa").html(data);
			},
			error : function(request, status, error) {
        $("#controle-empresa").html(request.responseText);
				//notificar('center', 'error', request.responseText, 2500);
			}
		});
  }
</script>
{% endblock %}
